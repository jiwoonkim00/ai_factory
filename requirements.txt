# AI 자율 운영 공정 시스템 - 필수 패키지
# 
# 설치 방법:
#   1. 기본 패키지: pip install -r requirements.txt
#   2. 선택 패키지: 아래 주석 참고하여 개별 설치
#
# 환경: Python 3.10+, macOS/Linux

# ============================================================================
# 딥러닝 프레임워크 (Core)
# ============================================================================
torch>=2.1.0
transformers>=4.36.0
accelerate>=0.25.0

# ============================================================================
# LoRA 파인튜닝
# ============================================================================
peft>=0.7.0
bitsandbytes>=0.41.0  # Linux/Windows 전용, macOS에서는 생략 가능

# ============================================================================
# 데이터 처리
# ============================================================================
datasets>=2.15.0
pandas>=1.5.0
numpy>=1.24.0
scikit-learn>=1.3.0
scipy>=1.10.0

# ============================================================================
# RAG 시스템 (Knowledge Base)
# ============================================================================
# LangChain 관련
langchain>=0.1.0
langchain-community>=0.0.20
langchain-core>=0.1.0
langchain-text-splitters>=0.0.1
langgraph>=0.0.20

# 벡터 검색
sentence-transformers>=2.2.0
faiss-cpu>=1.7.4
chromadb>=0.4.0

# 문서 파싱
pypdf>=3.0.0
python-docx>=0.8.11

# ============================================================================
# 임베딩 & 모델 허브
# ============================================================================
huggingface-hub>=0.19.0
sentencepiece>=0.1.99
protobuf>=3.20.0

# ============================================================================
# 웹 인터페이스 (Dashboard)
# ============================================================================
streamlit>=1.30.0
plotly>=5.18.0

# ============================================================================
# 유틸리티
# ============================================================================
tqdm>=4.65.0
python-dotenv>=1.0.0
pyyaml>=6.0
typing-extensions>=4.5.0

# ============================================================================
# 선택적 패키지 (Optional)
# ============================================================================
# 
# 1. Flash Attention 2 (GPU 성능 향상, CUDA 환경에서만)
#    pip install flash-attn --no-build-isolation
#
# 2. bitsandbytes (양자화, Linux/Windows 전용)
#    pip install bitsandbytes>=0.41.0
#
# 3. Watchdog (Streamlit 자동 리로드)
#    pip install watchdog
#
# 4. 개발 도구
#    pip install pytest black flake8 mypy

# ============================================================================
# 시스템 요구사항
# ============================================================================
# 
# GPU (권장):
#   - CUDA 11.8+ (NVIDIA GPU)
#   - Metal (Apple Silicon)
#   - GPU 메모리: 40GB+ (A100) 권장, 최소 16GB (RTX 4090)
#
# CPU (대안):
#   - 메모리: 32GB+ 권장
#   - 추론 속도가 느릴 수 있음
#
# 운영체제:
#   - Linux: 모든 패키지 지원
#   - macOS: bitsandbytes 제외하고 지원
#   - Windows: WSL2 권장

# ============================================================================
# 설치 가이드
# ============================================================================
#
# [방법 1] venv 사용 (추천)
#   python3 -m venv venv
#   source venv/bin/activate  # Windows: venv\Scripts\activate
#   pip install --upgrade pip
#   pip install -r requirements.txt
#
# [방법 2] conda 사용
#   conda create -n ai_factory python=3.10
#   conda activate ai_factory
#   pip install -r requirements.txt
#
# [방법 3] 기존 환경에 추가 (현재 상황)
#   # 이미 torch, transformers 등이 설치된 경우
#   pip install peft chromadb pypdf python-docx langgraph
#
# 설치 확인:
#   python -c "import torch; import transformers; import peft; print('✅ OK')"

# ============================================================================
# 문제 해결 (Troubleshooting)
# ============================================================================
#
# 1. torch 버전 충돌
#    → requirements.txt에서 torch 라인 주석 처리 후 설치
#    → 기존 torch 버전 유지
#
# 2. langchain 임포트 에러
#    → pip install langchain-community langchain-core --upgrade
#
# 3. chromadb 설치 실패 (M1/M2 Mac)
#    → pip install chromadb --no-deps
#    → pip install pydantic hnswlib
#
# 4. peft 임포트 에러
#    → pip install peft --upgrade
#    → transformers 버전 확인 (4.36.0+)
#
# 5. streamlit 실행 오류
#    → pip install streamlit plotly --upgrade
#    → 브라우저 캐시 삭제 후 재시작

# ============================================================================
# 패키지 버전 확인
# ============================================================================
# 
# 터미널에서 실행:
#   pip list | grep -E "torch|transformers|peft|langchain|chromadb|streamlit"
#
# 또는 Python에서:
#   import torch, transformers, peft
#   print(f"torch: {torch.__version__}")
#   print(f"transformers: {transformers.__version__}")
#   print(f"peft: {peft.__version__}")

# ============================================================================
# 업데이트 이력
# ============================================================================
# v2.0 (2024-12-11)
#   - deepod 제거 (torch 버전 충돌 해결)
#   - chromadb, pypdf, python-docx 추가
#   - langchain 서브패키지 명시
#   - macOS 호환성 개선
#   - 상세한 설치 가이드 추가
